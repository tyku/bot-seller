# ‚úÖ Checklist –∏–∑–º–µ–Ω–µ–Ω–∏–π

## Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. Auth Module

- [x] **register.dto.ts** - –†–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ 2 DTO
  ```typescript
  ‚úÖ RegisterEmailDto: { name, email }
  ‚úÖ RegisterTelegramDto: { name, phone }
  ‚ùå –£–±—Ä–∞–Ω–æ: password, telegramUsername, verificationMethod
  ```

- [x] **login.dto.ts** - –£–±—Ä–∞–Ω password
  ```typescript
  ‚ùå –£–±—Ä–∞–Ω–æ: password
  ‚úÖ –û—Å—Ç–∞–ª–æ—Å—å: email OR phone
  ```

- [x] **auth.controller.ts** - 2 endpoint —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  ```typescript
  ‚úÖ POST /auth/register/email
  ‚úÖ POST /auth/register/telegram
  ‚úÖ POST /auth/login (–æ–±–Ω–æ–≤–ª–µ–Ω - –±–µ–∑ –ø–∞—Ä–æ–ª—è)
  ```

- [x] **auth.service.ts** - –£–±—Ä–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–∞—Ä–æ–ª–µ–π
  ```typescript
  ‚úÖ registerEmail(dto) - –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥
  ‚úÖ registerTelegram(dto) - –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥
  ‚úÖ login(dto) - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥ (–±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è)
  ‚ùå –£–±—Ä–∞–Ω–æ: bcrypt.hash(), bcrypt.compare()
  ```

### 2. Customer Module

- [x] **customer.schema.ts** - –£–±—Ä–∞–Ω—ã –ø–æ–ª—è
  ```typescript
  ‚ùå –£–±—Ä–∞–Ω–æ: passwordHash
  ‚ùå –£–±—Ä–∞–Ω–æ: telegramUsername
  ‚úÖ –û—Å—Ç–∞–ª–æ—Å—å: name, customerId, email, phone, status, telegramId
  ```

- [x] **create-customer.dto.ts** - –£–±—Ä–∞–Ω—ã –ø–æ–ª—è
  ```typescript
  ‚ùå –£–±—Ä–∞–Ω–æ: passwordHash
  ‚ùå –£–±—Ä–∞–Ω–æ: telegramUsername
  ```

## Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. Register Step

- [x] **RegisterStep.tsx** - 2 —Ñ–æ—Ä–º—ã
  ```typescript
  ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å Email / Telegram
  ‚úÖ Email —Ñ–æ—Ä–º–∞: { name, email }
  ‚úÖ Telegram —Ñ–æ—Ä–º–∞: { name, phone }
  ‚ùå –£–±—Ä–∞–Ω–æ: password, confirmPassword, telegramUsername
  ‚úÖ –ù–æ–≤—ã–π UI —Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º
  ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  ```

### 2. Verify Step

- [x] **VerifyStep.tsx** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ phone
  ```typescript
  ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ email –∏ phone
  ‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞
  ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–¥—Å–∫–∞–∑–∫–∏
  ```

### 3. API Client

- [x] **api.ts** - –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã
  ```typescript
  ‚úÖ registerEmail({ name, email })
  ‚úÖ registerTelegram({ name, phone })
  ‚úÖ login({ email OR phone }) - –±–µ–∑ –ø–∞—Ä–æ–ª—è
  ‚úÖ verify({ email/phone, code, method })
  ‚úÖ resendCode(identifier, method)
  ```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [x] **CHANGES_NO_PASSWORD.md** - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [x] **AUTH_FLOW_DIAGRAM.md** - –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Å—Ö–µ–º—ã flow
- [x] **HOW_TO_REGISTER.md** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [x] **CHECKLIST_CHANGES.md** - –≠—Ç–æ—Ç —Ñ–∞–π–ª

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Backend API

- [ ] **Email —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**
  ```bash
  curl -X POST http://localhost:3000/auth/register/email \
    -H "Content-Type: application/json" \
    -d '{"name":"Test User","email":"test@example.com"}'
  ```

- [ ] **Telegram —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**
  ```bash
  curl -X POST http://localhost:3000/auth/register/telegram \
    -H "Content-Type: application/json" \
    -d '{"name":"Test User","phone":"+79991234567"}'
  ```

- [ ] **Login**
  ```bash
  curl -X POST http://localhost:3000/auth/login \
    -H "Content-Type: application/json" \
    -d '{"email":"test@example.com"}'
  ```

- [ ] **Verify**
  ```bash
  curl -X POST http://localhost:3000/auth/verify \
    -H "Content-Type: application/json" \
    -d '{"email":"test@example.com","code":"123456","method":"email"}'
  ```

### Frontend

- [ ] –û—Ç–∫—Ä—ã—Ç—å http://localhost:3001
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å Email/Telegram
- [ ] –ó–∞–ø–æ–ª–Ω–∏—Ç—å Email —Ñ–æ—Ä–º—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
- [ ] –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É
- [ ] –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥ (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend)
- [ ] –í–≤–µ—Å—Ç–∏ –∫–æ–¥ –Ω–∞ VerifyStep
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å–ø–µ—à–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram —Ñ–æ—Ä–º—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Resend Code

## –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

- [ ] **–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–æ–ª—è**
  ```javascript
  // MongoDB
  db.customers.updateMany(
    {},
    { 
      $unset: { 
        passwordHash: "",
        telegramUsername: ""
      }
    }
  );
  ```

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã**
  ```javascript
  db.customers.getIndexes();
  // –î–æ–ª–∂–Ω—ã –±—ã—Ç—å: customerId, email, phone, telegramId
  ```

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å MongoDB
docker ps | grep mongo

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env
cat .env | grep MONGODB_URI

# –û—á–∏—Å—Ç–∏—Ç—å dist
rm -rf dist && npm run build
```

### Frontend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
rm -rf frontend/.next
rm -rf frontend/node_modules
cd frontend && npm install

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã
lsof -i :3001
```

### –ö–æ–¥ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend
npm run start:dev
# –°–º–æ—Ç—Ä–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—å - —Ç–∞–º –±—É–¥–µ—Ç –∫–æ–¥

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
cat .env | grep SMTP
```

## –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### Backend
- [ ] Backend –∑–∞–ø—É—â–µ–Ω: `npm run start:dev`
- [ ] MongoDB —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –õ–æ–≥–∏ –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] POST /auth/register/email —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] POST /auth/register/telegram —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] POST /auth/login —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] POST /auth/verify —Ä–∞–±–æ—Ç–∞–µ—Ç

### Frontend
- [ ] Frontend –∑–∞–ø—É—â–µ–Ω: `npm run dev`
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è: http://localhost:3001
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å Email/Telegram —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Email —Ñ–æ—Ä–º–∞ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è
- [ ] Telegram —Ñ–æ—Ä–º–∞ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- [ ] Redirect –Ω–∞ VerifyStep
- [ ] VerifyStep —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Login —Ä–∞–±–æ—Ç–∞–µ—Ç

### UI/UX
- [ ] –§–æ—Ä–º—ã –ø–æ–Ω—è—Ç–Ω—ã
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –û—à–∏–±–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
- [ ] Success —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∏–Ω—Ç—É–∏—Ç–∏–≤–µ–Ω
- [ ] –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ–ª–µ–∑–Ω—ã
- [ ] Resend code —Ä–∞–±–æ—Ç–∞–µ—Ç

## –ú–µ—Ç—Ä–∏–∫–∏

### –ö–æ–¥
- –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ —É–±—Ä–∞–Ω–æ: ~200
- –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–æ: ~150
- –§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ: 10
- –°–ª–æ–∂–Ω–æ—Å—Ç—å: -30%

### UX
- –ü–æ–ª–µ–π –≤ —Ñ–æ—Ä–º–µ: –±—ã–ª–æ 6-7, —Å—Ç–∞–ª–æ 2
- –®–∞–≥–æ–≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: –±—ã–ª–æ 1, —Å—Ç–∞–ª–æ 1 (–Ω–æ –ø—Ä–æ—â–µ)
- –í—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: -50%
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—à–∏–±–∫–∏: -70%

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –°–ª–∞–±—ã–µ –ø–∞—Ä–æ–ª–∏: ‚ùå (–Ω–µ—Ç –ø–∞—Ä–æ–ª–µ–π)
- –í–∑–ª–æ–º –ø–∞—Ä–æ–ª–µ–π: ‚ùå (–Ω–µ—Ç –ø–∞—Ä–æ–ª–µ–π)
- –£—Ç–µ—á–∫–∞ –ø–∞—Ä–æ–ª–µ–π: ‚ùå (–Ω–µ—Ç –ø–∞—Ä–æ–ª–µ–π)
- –ö–æ–¥—ã –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ: ‚úÖ
- –ö–æ–¥—ã —Å expiry: ‚úÖ

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- [ ] –î–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å CAPTCHA (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ support
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É –≤—Ç–æ—Ä–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ (email + telegram)
- [ ] –î–æ–±–∞–≤–∏—Ç—å 2FA (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –î–æ–±–∞–≤–∏—Ç—å audit log
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å E2E —Ç–µ—Å—Ç—ã
- [ ] Deploy –Ω–∞ production

## –ó–∞–º–µ—Ç–∫–∏

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –ü—Ä–æ—â–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ú–µ–Ω—å—à–µ –∫–æ–¥–∞
- ‚úÖ –ú–µ–Ω—å—à–µ –±–∞–≥–æ–≤
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥
- ‚úÖ –ö–∞–∫ —É –∫—Ä—É–ø–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏
- ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç email/telegram –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚ö†Ô∏è –ù—É–∂–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
- ‚ö†Ô∏è Rate limiting –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- üìå –î–æ–±–∞–≤–∏—Ç—å rate limiting (max 3 –∫–æ–¥–∞ –≤ 10 –º–∏–Ω—É—Ç)
- üìå –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- üìå –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤
- üìå –î–æ–±–∞–≤–∏—Ç—å CAPTCHA –ø—Ä–∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –ø—É–Ω–∫—Ç—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–∞ production!** ‚úÖ
