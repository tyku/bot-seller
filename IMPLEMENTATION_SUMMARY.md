# ðŸ“‹ Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ð°Ñ ÑÐ²Ð¾Ð´ÐºÐ° Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸

## âœ… Ð§Ñ‚Ð¾ Ð±Ñ‹Ð»Ð¾ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾

### ðŸ” 1. Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸ (Auth Module)

**Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:** `src/auth/`

**ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹:**
- âœ… JWT Strategy Ñ Passport
- âœ… JWT Auth Guard (Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð°Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ð°)
- âœ… Ð”ÐµÐºÐ¾Ñ€Ð°Ñ‚Ð¾Ñ€Ñ‹ `@Public()` Ð¸ `@CurrentUser()`
- âœ… DTOs Ñ Zod Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸ÐµÐ¹:
  - RegisterDto (Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ)
  - LoginDto (Ð²Ñ…Ð¾Ð´)
  - VerifyCodeDto (Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ)
- âœ… AuthService Ñ Ð¼ÐµÑ‚Ð¾Ð´Ð°Ð¼Ð¸:
  - `register()` - Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸ÐµÐ¹ ÐºÐ¾Ð´Ð¾Ð²
  - `login()` - Ð²Ñ…Ð¾Ð´ Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¾Ð¹ Ð¿Ð°Ñ€Ð¾Ð»Ñ
  - `verifyCode()` - Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ Ð¸ Ð²Ñ‹Ð´Ð°Ñ‡Ð° Ñ‚Ð¾ÐºÐµÐ½Ð°
  - `resendVerificationCode()` - Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð°Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ° ÐºÐ¾Ð´Ð°
- âœ… AuthController Ñ ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ð°Ð¼Ð¸:
  - `POST /auth/register`
  - `POST /auth/login`
  - `POST /auth/verify`
  - `POST /auth/resend-code`

**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸:**
- ÐŸÐ°Ñ€Ð¾Ð»Ð¸ Ñ…ÐµÑˆÐ¸Ñ€ÑƒÑŽÑ‚ÑÑ Ñ bcrypt (10 rounds)
- JWT Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ñ TTL 24 Ñ‡Ð°ÑÐ°
- OpenID Connect pattern (sub, email, customerId Ð² payload)
- Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð¿Ð°Ñ€Ð¾Ð»ÐµÐ¹: Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ 8 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð², Ð·Ð°Ð³Ð»Ð°Ð²Ð½Ð°Ñ/ÑÑ‚Ñ€Ð¾Ñ‡Ð½Ð°Ñ Ð±ÑƒÐºÐ²Ð°, Ñ†Ð¸Ñ„Ñ€Ð°

---

### ðŸ“§ 2. ÐœÐ¾Ð´ÑƒÐ»ÑŒ Ð²ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸ (Verification Module)

**Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:** `src/verification/`

**ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹:**
- âœ… VerificationService Ñ Ð¼ÐµÑ‚Ð¾Ð´Ð°Ð¼Ð¸:
  - `sendEmailVerification()` - Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ° ÐºÐ¾Ð´Ð° Ð½Ð° email
  - `sendTelegramVerification()` - Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ° ÐºÐ¾Ð´Ð° Ð² Telegram
  - `verifyCode()` - Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð´Ð°
  - `generateVerificationCode()` - Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ 6-Ð·Ð½Ð°Ñ‡Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð´Ð°
- âœ… Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ nodemailer Ð´Ð»Ñ email
- âœ… Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ Telegram Ð¼Ð¾Ð´ÑƒÐ»ÐµÐ¼

**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸:**
- ÐšÐ¾Ð´Ñ‹ Ð¸Ð· 6 Ñ†Ð¸Ñ„Ñ€
- TTL 15 Ð¼Ð¸Ð½ÑƒÑ‚
- Ð¥Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð² Customer collection
- Ð Ð°Ð·Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ ÐºÐ¾Ð´Ñ‹ Ð´Ð»Ñ email Ð¸ telegram

---

### ðŸ“± 3. Telegram Ð¼Ð¾Ð´ÑƒÐ»ÑŒ (Telegram Module)

**Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:** `src/telegram/`

**ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹:**
- âœ… TelegramService Ñ Ð¼ÐµÑ‚Ð¾Ð´Ð°Ð¼Ð¸:
  - `sendVerificationCode()` - ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð´Ð° Ð² Ð¿Ð°Ð¼ÑÑ‚Ð¸
  - `checkVerificationCode()` - Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð´Ð°
  - `linkTelegramAccount()` - Ð¿Ñ€Ð¸Ð²ÑÐ·ÐºÐ° telegramId Ðº customer
  - `getPendingVerification()` - Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ pending ÐºÐ¾Ð´Ð°
  - ÐÐ²Ñ‚Ð¾Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° expired ÐºÐ¾Ð´Ð¾Ð² ÐºÐ°Ð¶Ð´Ñ‹Ðµ 5 Ð¼Ð¸Ð½ÑƒÑ‚
- âœ… TelegramController Ñ ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ð°Ð¼Ð¸:
  - `GET /telegram/verification/:username`
  - `POST /telegram/link`

**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸:**
- Ð¥Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð´Ð¾Ð² Ð² Ð¿Ð°Ð¼ÑÑ‚Ð¸ (Map)
- ÐÐµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ð²ÐµÐ±Ñ…ÑƒÐºÐ¸ (Ð½Ðµ Ð¼ÐµÑˆÐ°ÐµÑ‚ future multi-tenant ÑÐµÑ€Ð²ÐµÑ€Ñƒ)
- ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹ API Ð´Ð»Ñ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¸ Ñ Ð»ÑŽÐ±Ñ‹Ð¼ Ð±Ð¾Ñ‚Ð¾Ð¼
- Long polling friendly

---

### ðŸ‘¤ 4. ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ Customer Module

**Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:** `src/customer/`

**Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² ÑÑ…ÐµÐ¼Ðµ:**
```typescript
+ passwordHash: string
+ emailVerified: boolean
+ telegramVerified: boolean
+ emailVerificationCode: string
+ emailVerificationExpires: Date
+ telegramVerificationCode: string
+ telegramVerificationExpires: Date
+ telegramId: number (unique, sparse)
+ telegramUsername: string
```

**ÐÐ¾Ð²Ñ‹Ðµ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹:**
- âœ… `findByEmail()` - Ð¿Ð¾Ð¸ÑÐº Ð¿Ð¾ email
- âœ… `updateCustomer()` - Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ customer
- âœ… `findByTelegramId()` - Ð¿Ð¾Ð¸ÑÐº Ð¿Ð¾ telegramId

**ÐÐ¾Ð²Ñ‹Ð¹ ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚:**
- âœ… `GET /customers/me` - Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ

---

### ðŸ¤– 5. Ð—Ð°Ñ‰Ð¸Ñ‰ÐµÐ½Ð½Ñ‹Ð¹ Customer Settings Module

**Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:** `src/customer-settings/`

**Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ:**
- âœ… Ð’ÑÐµ ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ñ‹ Ð·Ð°Ñ‰Ð¸Ñ‰ÐµÐ½Ñ‹ JWT guard
- âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ownership (Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ¾ ÑÐ²Ð¾Ð¸Ð¼Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ð¼Ð¸)
- âœ… Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ `@CurrentUser()` Ð´ÐµÐºÐ¾Ñ€Ð°Ñ‚Ð¾Ñ€Ð°
- âœ… Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ customerId Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸/Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¸

**Ð—Ð°Ñ‰Ð¸Ñ‰ÐµÐ½Ð½Ñ‹Ðµ ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ñ‹:**
- `POST /customer-settings` - ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ ÑÐµÐ±Ñ)
- `GET /customer-settings` - ÑÐ¿Ð¸ÑÐ¾Ðº (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ²Ð¾Ð¸)
- `GET /customer-settings/:id` - Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ²Ð¾Ð¸)
- `PATCH /customer-settings/:id` - Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ²Ð¾Ð¸)
- `DELETE /customer-settings/:id` - ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ²Ð¾Ð¸)

---

### ðŸ›¡ï¸ 6. Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð°Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ð° API

**Ð ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ:**
- âœ… JwtAuthGuard ÐºÐ°Ðº APP_GUARD (Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾)
- âœ… Reflector Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ `@Public()` Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ñ…
- âœ… ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ð° Ð²ÑÐµÑ… ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ð¾Ð² Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ
- âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ° verified Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð·Ð°Ð¿Ñ€Ð¾ÑÐµ

---

## ðŸ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹

### ÐœÐ¾Ð´ÑƒÐ»Ð¸ Ð¸ ÑÐµÑ€Ð²Ð¸ÑÑ‹
```
src/auth/
â”œâ”€â”€ auth.module.ts
â”œâ”€â”€ auth.service.ts
â”œâ”€â”€ auth.controller.ts
â”œâ”€â”€ strategies/jwt.strategy.ts
â”œâ”€â”€ guards/jwt-auth.guard.ts
â”œâ”€â”€ decorators/
â”‚   â”œâ”€â”€ public.decorator.ts
â”‚   â””â”€â”€ current-user.decorator.ts
â””â”€â”€ dto/
    â”œâ”€â”€ register.dto.ts
    â”œâ”€â”€ login.dto.ts
    â””â”€â”€ verify-code.dto.ts

src/verification/
â”œâ”€â”€ verification.module.ts
â””â”€â”€ verification.service.ts

src/telegram/
â”œâ”€â”€ telegram.module.ts
â”œâ”€â”€ telegram.service.ts
â””â”€â”€ telegram.controller.ts
```

### Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ
```
.env.example                      # ÐŸÑ€Ð¸Ð¼ÐµÑ€ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
README.md                         # Ð“Ð»Ð°Ð²Ð½Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ
API_DOCUMENTATION.md              # ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ API
QUICK_START.md                    # Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚ Ð·Ð° 5 Ð¼Ð¸Ð½ÑƒÑ‚
TELEGRAM_BOT_EXAMPLE.md          # ÐŸÑ€Ð¸Ð¼ÐµÑ€ Telegram Ð±Ð¾Ñ‚Ð°
IMPLEMENTATION_SUMMARY.md        # Ð­Ñ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð»
```

---

## ðŸš€ ÐšÐ°Ðº Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ

### 1. Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
npm install

# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ .env
cp .env.example .env

# ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ .env (Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ JWT_SECRET Ð¸ SMTP)
nano .env

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ MongoDB
docker run -d -p 27017:27017 --name mongodb mongo:latest
```

### 2. Ð—Ð°Ð¿ÑƒÑÐº Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

```bash
# Development
npm run start:dev

# Production
npm run build
npm run start:prod
```

### 3. Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

Ð¡Ð¼. [QUICK_START.md](./QUICK_START.md) Ð´Ð»Ñ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð¾Ð² curl ÐºÐ¾Ð¼Ð°Ð½Ð´.

---

## ðŸ”‘ ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð½Ñ†ÐµÐ¿Ñ†Ð¸Ð¸

### OpenID Connect Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client  â”‚                                                  â”‚  Server â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                                                            â”‚
     â”‚  POST /auth/register                                      â”‚
     â”‚  { email, password, verificationMethod }                  â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                                                            â”‚
     â”‚  { customerId, message: "code sent" }                     â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                                                            â”‚
     â”‚  User receives code (email/telegram)                      â”‚
     â”‚                                                            â”‚
     â”‚  POST /auth/verify                                        â”‚
     â”‚  { email, code, method }                                  â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                                                            â”‚
     â”‚  { accessToken, customer }                                â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                                                            â”‚
     â”‚  Use accessToken for all subsequent requests              â”‚
     â”‚  Authorization: Bearer <accessToken>                      â”‚
     â”‚                                                            â”‚
     â”‚  GET /customer-settings                                   â”‚
     â”‚  Authorization: Bearer <accessToken>                      â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                                                            â”‚
     â”‚  { success: true, data: [...] }                           â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                                                            â”‚
```

### Telegram Verification Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client â”‚       â”‚   API   â”‚       â”‚ Telegram â”‚       â”‚   Bot   â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚                 â”‚                  â”‚                  â”‚
    â”‚  Register with  â”‚                  â”‚                  â”‚
    â”‚  telegram methodâ”‚                  â”‚                  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                  â”‚
    â”‚                 â”‚                  â”‚                  â”‚
    â”‚                 â”‚  Store code      â”‚                  â”‚
    â”‚                 â”‚  in memory       â”‚                  â”‚
    â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
    â”‚                 â”‚                  â”‚                  â”‚
    â”‚  User opens bot â”‚                  â”‚                  â”‚
    â”‚  and sends      â”‚                  â”‚                  â”‚
    â”‚  /verify        â”‚                  â”‚                  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                 â”‚                  â”‚                  â”‚
    â”‚                 â”‚                  â”‚  Check code      â”‚
    â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                 â”‚                  â”‚                  â”‚
    â”‚                 â”‚  Return code     â”‚                  â”‚
    â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                 â”‚                  â”‚                  â”‚
    â”‚  Bot shows code â”‚                  â”‚                  â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                 â”‚                  â”‚                  â”‚
    â”‚  User sends     â”‚                  â”‚                  â”‚
    â”‚  /link 123456   â”‚                  â”‚                  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                 â”‚                  â”‚                  â”‚
    â”‚                 â”‚  POST /telegram/link               â”‚
    â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                 â”‚                  â”‚                  â”‚
    â”‚                 â”‚  Link account    â”‚                  â”‚
    â”‚                 â”‚                  â”‚                  â”‚
    â”‚  Confirmation   â”‚                  â”‚                  â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                 â”‚                  â”‚                  â”‚
    â”‚  POST /auth/verify with code                         â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                  â”‚
    â”‚                 â”‚                  â”‚                  â”‚
    â”‚  Get JWT token  â”‚                  â”‚                  â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                  â”‚
    â”‚                 â”‚                  â”‚                  â”‚
```

---

## ðŸ” Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ

### Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¼ÐµÑ€Ñ‹

1. **ÐÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ:**
   - JWT Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ñ HS256
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ° verified
   - TTL Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð² 24 Ñ‡Ð°ÑÐ°

2. **ÐÐ²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ:**
   - Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ñ‹Ð¹ guard Ð½Ð° Ð²ÑÐµÑ… ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ð°Ñ…
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ownership Ð¿ÐµÑ€ÐµÐ´ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸ÑÐ¼Ð¸
   - Ð”ÐµÐºÐ¾Ñ€Ð°Ñ‚Ð¾Ñ€ @Public Ð´Ð»Ñ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ð¾Ð²

3. **ÐŸÐ°Ñ€Ð¾Ð»Ð¸:**
   - bcrypt Ñ…ÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ (10 rounds)
   - Ð¡Ñ‚Ñ€Ð¾Ð³Ð°Ñ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ (8+ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð², Ð·Ð°Ð³Ð»Ð°Ð²Ð½Ð°Ñ, ÑÑ‚Ñ€Ð¾Ñ‡Ð½Ð°Ñ, Ñ†Ð¸Ñ„Ñ€Ð°)
   - ÐÐ¸ÐºÐ¾Ð³Ð´Ð° Ð½Ðµ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÑŽÑ‚ÑÑ Ð² API

4. **Ð’ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ:**
   - 6-Ð·Ð½Ð°Ñ‡Ð½Ñ‹Ðµ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ðµ ÐºÐ¾Ð´Ñ‹
   - TTL 15 Ð¼Ð¸Ð½ÑƒÑ‚
   - Ð Ð°Ð·Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ ÐºÐ¾Ð´Ñ‹ Ð´Ð»Ñ email/telegram
   - ÐÐ²Ñ‚Ð¾Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° expired ÐºÐ¾Ð´Ð¾Ð²

5. **Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ:**
   - Zod ÑÑ…ÐµÐ¼Ñ‹ Ð´Ð»Ñ Ð²ÑÐµÑ… Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…
   - Email format validation
   - Phone number format (E.164)
   - Custom validation pipes

---

## ðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°

- **ÐœÐ¾Ð´ÑƒÐ»ÐµÐ¹ ÑÐ¾Ð·Ð´Ð°Ð½Ð¾:** 3 Ð½Ð¾Ð²Ñ‹Ñ… (Auth, Verification, Telegram)
- **ÐœÐ¾Ð´ÑƒÐ»ÐµÐ¹ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾:** 2 (Customer, CustomerSettings)
- **Ð¤Ð°Ð¹Ð»Ð¾Ð² ÑÐ¾Ð·Ð´Ð°Ð½Ð¾:** ~20
- **Ð­Ð½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ð¾Ð² Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾:** 7 Ð½Ð¾Ð²Ñ‹Ñ…
- **Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾:** 10+
- **Ð¡Ñ‚Ñ€Ð¾Ðº ÐºÐ¾Ð´Ð°:** ~1500+
- **Ð’Ñ€ÐµÐ¼Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸:** ~1 Ñ‡Ð°Ñ

---

## ðŸŽ¯ Ð§Ñ‚Ð¾ Ð¼Ð¾Ð¶Ð½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð´Ð°Ð»ÑŒÑˆÐµ

### ÐšÑ€Ð°Ñ‚ÐºÐ¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ðµ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ:
- [ ] Refresh tokens Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð»ÐµÐ½Ð¸Ñ ÑÐµÑÑÐ¸Ð¸
- [ ] Rate limiting Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹ Ð¾Ñ‚ Ð±Ñ€ÑƒÑ‚Ñ„Ð¾Ñ€ÑÐ°
- [ ] Swagger/OpenAPI Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ
- [ ] Docker Compose Ñ„Ð°Ð¹Ð» Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð³Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ°
- [ ] Environment validation (Ñ joi Ð¸Ð»Ð¸ zod)

### Ð¡Ñ€ÐµÐ´Ð½ÐµÑÑ€Ð¾Ñ‡Ð½Ñ‹Ðµ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ:
- [ ] Admin Ñ€Ð¾Ð»Ð¸ Ð¸ permissions
- [ ] OAuth2 providers (Google, GitHub)
- [ ] Email templates (ÐºÑ€Ð°ÑÐ¸Ð²Ñ‹Ðµ Ð¿Ð¸ÑÑŒÐ¼Ð°)
- [ ] SMS Ð²ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ ÐºÐ°Ðº Ð°Ð»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð°
- [ ] Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ (Winston/Pino)

### Ð”Ð¾Ð»Ð³Ð¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ðµ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ:
- [ ] Multi-tenant Telegram webhook server
- [ ] Real-time ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ (WebSocket)
- [ ] ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¸ Ð°Ð»ÐµÑ€Ñ‚Ñ‹
- [ ] CI/CD pipeline
- [ ] Ð“Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

---

## ðŸ“ž ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°

Ð•ÑÐ»Ð¸ Ñƒ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹:

1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ [QUICK_START.md](./QUICK_START.md)
2. ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ [API_DOCUMENTATION.md](./API_DOCUMENTATION.md)
3. Ð˜Ð·ÑƒÑ‡Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð² [TELEGRAM_BOT_EXAMPLE.md](./TELEGRAM_BOT_EXAMPLE.md)
4. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Issue Ð² Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸

---

## âœ¨ Ð—Ð°ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ

Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð³Ð¾Ñ‚Ð¾Ð²Ð° Ðº Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÑŽ! Ð’Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð»Ð¸:

âœ… ÐŸÐ¾Ð»Ð½Ð¾Ñ†ÐµÐ½Ð½ÑƒÑŽ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸ÑŽ Ñ JWT  
âœ… Ð”Ð²ÑƒÑ…Ñ„Ð°ÐºÑ‚Ð¾Ñ€Ð½ÑƒÑŽ Ð²ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸ÑŽ (email + telegram)  
âœ… Ð—Ð°Ñ‰Ð¸Ñ‰ÐµÐ½Ð½Ð¾Ðµ API Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¾Ð¹ ownership  
âœ… ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹ Telegram Ð¼Ð¾Ð´ÑƒÐ»ÑŒ Ð´Ð»Ñ Ð²ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸  
âœ… Ð“Ð¾Ñ‚Ð¾Ð²ÑƒÑŽ Ð¸Ð½Ñ„Ñ€Ð°ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð±Ð¾Ñ‚Ð°Ð¼Ð¸  
âœ… ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÑƒÑŽ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÑŽ Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñ‹  

**ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð³Ð¾Ñ‚Ð¾Ð²Ð¾ Ðº Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ Ð¸ Ð´ÐµÐ¿Ð»Ð¾ÑŽ! ðŸš€**
